<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>/Users/steven.mortimer/github/rdfp/README.md • rdfp</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script>
<script src="pkgdown.js"></script>
  
  
<meta property="og:title" content="/Users/steven.mortimer/github/rdfp/README.md" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98603021-1', 'auto');
  ga('send', 'pageview');

</script>

  </head>

  <body>
    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">rdfp</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="articles/administrative-tasks.html">Administrative Tasks</a>
    </li>
    <li>
      <a href="articles/ad-trafficking-setup.html">Ad Trafficking Setup</a>
    </li>
    <li>
      <a href="articles/manipulating-orders-and-lineitems.html">Manipulating Orders and LineItems</a>
    </li>
    <li>
      <a href="articles/checking-availability.html">Checking Availability</a>
    </li>
    <li>
      <a href="articles/pulling-reports.html">Pulling Reports</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/StevenMMortimer/rdfp">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="contents col-md-12">
    <div class="page-header">
      <h1>/Users/steven.mortimer/github/rdfp/README.md</h1>
    </div>

<div id="rdfp" class="section level1">
<h1 class="hasAnchor">
<a href="#rdfp" class="anchor"></a>rdfp <img src="man/figures/rdfp.png" width="120px" align="right">
</h1>
<p><a href="https://travis-ci.org/StevenMMortimer/rdfp"><img src="https://travis-ci.org/StevenMMortimer/rdfp.svg?branch=master" alt="Build Status"></a> <a href="https://ci.appveyor.com/project/StevenMMortimer/rdfp"><img src="https://ci.appveyor.com/api/projects/status/github/StevenMMortimer/rdfp?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a> <a href="http://cran.r-project.org/package=rdfp"><img src="http://www.r-pkg.org/badges/version/rdfp" alt="CRAN_Status_Badge"></a> <a href="https://codecov.io/gh/StevenMMortimer/rdfp?branch=master"><img src="https://codecov.io/gh/StevenMMortimer/rdfp/branch/master/graph/badge.svg" alt="Coverage Status"></a></p>
<p><strong>Compiled using DFP API version: <code>v201802</code></strong></p>
<p><strong>rdfp</strong> allows you to use the DoubleClick for Publishers API from R. Manage inventory, create orders, pull reports, and more!</p>
<div id="table-of-contents" class="section level2">
<h2 class="hasAnchor">
<a href="#table-of-contents" class="anchor"></a>Table of Contents</h2>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#vignettes">Vignettes</a></li>
<li>
<a href="#usage">Usage</a>
<ul>
<li><a href="#functions">Functions</a></li>
<li><a href="#set-api-version">Set API Version</a></li>
<li><a href="#authenticate">Authenticate</a></li>
<li><a href="#get-current-user-info">Get Current User Info</a></li>
<li><a href="#pull-a-lineitem">Pull a LineItem</a></li>
<li><a href="#run-a-report">Run a Report</a></li>
</ul>
</li>
<li><a href="#credits">Credits</a></li>
<li><a href="#more-information">More Information</a></li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># this package is currently not on CRAN, so it should be installed from GitHub</span>
<span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"StevenMMortimer/rdfp"</span>)</code></pre></div>
<p>If you encounter a clear bug, please file a minimal reproducible example on <a href="https://github.com/StevenMMortimer/rdfp/issues">GitHub</a>.</p>
</div>
<div id="vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h2>
<p>The README below outlines the package functionality, but review the vignettes for more detailed examples on usage.</p>
<ul>
<li><a href="https://StevenMMortimer.github.io/rdfp/articles/administrative-tasks.html">Administrative Tasks</a></li>
<li><a href="https://StevenMMortimer.github.io/rdfp/articles/ad-trafficking-setup.html">Ad Trafficking Setup</a></li>
<li><a href="https://StevenMMortimer.github.io/rdfp/articles/manipulating-orders-and-lineitems.html">Manipulating Orders and LineItems</a></li>
<li><a href="https://StevenMMortimer.github.io/rdfp/articles/checking-availability.html">Checking Availability</a></li>
<li><a href="https://StevenMMortimer.github.io/rdfp/articles/pulling-reports.html">Pulling Reports</a></li>
</ul>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="functions" class="section level3">
<h3 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h3>
<p>All functions start with <code>dfp_</code> so that you can easily identify DFP-specific operations and use tab completion in RStudio. Most <strong>rdfp</strong> functions will return a <code>data.frame</code> or <code>list</code> parsed from the XML returned in the SOAP response.</p>
</div>
<div id="load-package-and-set-api-version" class="section level3">
<h3 class="hasAnchor">
<a href="#load-package-and-set-api-version" class="anchor"></a>Load Package and Set API Version</h3>
<p>Google releases 4 versions of the DFP API each year and deprecates versions older than one year, so there is a lot that’s regularly changing in this package. <strong>rdfp</strong> is periodically compiled against a recent version of the API. If you would like to use an older or newer API version that what is the package default, then just specify it as an option.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rdfp)
<span class="co"># see the package default version</span>
<span class="kw">getOption</span>(<span class="st">"rdfp.version"</span>)
<span class="co">#&gt; [1] "v201802"</span>
<span class="co"># this will force all calls to be against the version "v201711"</span>
<span class="kw">options</span>(<span class="dt">rdfp.version =</span> <span class="st">"v201711"</span>)</code></pre></div>
</div>
<div id="authenticate" class="section level3">
<h3 class="hasAnchor">
<a href="#authenticate" class="anchor"></a>Authenticate</h3>
<p>To authenticate you will first need to specify the <code>network_code</code> of the DFP instance you’d like to connect to. This is the only required option that the user must specify when using the <strong>rdfp</strong> package. After setting the <code>network_code</code> all you need to do is run <code><a href="reference/dfp_auth.html">dfp_auth()</a></code>. If you already have a cached <code>.httr-oauth</code> file in the current working directory, then the token will be loaded and refreshed if necessary. Otherwise, your browswer will pop open and you will interactively authenticate.</p>
<p>The package has other options like a client_id and client_secret where you can connect using your own API client instead of the package default. Using your own client requires setting one up in the [Google Developers Console] (<a href="https://console.developers.google.com" class="uri">https://console.developers.google.com</a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">rdfp.network_code =</span> <span class="st">"12345678"</span>)
<span class="kw">options</span>(<span class="dt">rdfp.application_name =</span> <span class="st">"MyApp"</span>)
<span class="kw">options</span>(<span class="dt">rdfp.client_id =</span> <span class="st">"012345678901-99thisisatest99.apps.googleusercontent.com"</span>)
<span class="kw">options</span>(<span class="dt">rdfp.client_secret =</span> <span class="st">"Th1s1sMyC1ientS3cr3t"</span>)

<span class="co"># this function will use the options set above and </span>
<span class="co"># cache an OAuth token in the working directory</span>
<span class="co"># the token will be refreshed when necessary</span>
<span class="kw"><a href="reference/dfp_auth.html">dfp_auth</a></span>()</code></pre></div>
</div>
<div id="get-current-user-info" class="section level3">
<h3 class="hasAnchor">
<a href="#get-current-user-info" class="anchor"></a>Get Current User Info</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Check current user or network</span>
user_info &lt;-<span class="st"> </span><span class="kw"><a href="reference/dfp_getCurrentUser.html">dfp_getCurrentUser</a></span>()
user_info[,<span class="kw">c</span>(<span class="st">'id'</span>, <span class="st">'isActive'</span>)]
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;           id isActive</span>
<span class="co">#&gt;        &lt;dbl&gt; &lt;chr&gt;   </span>
<span class="co">#&gt; 1 185549536. true</span>
network_info &lt;-<span class="st"> </span><span class="kw"><a href="reference/dfp_getCurrentNetwork.html">dfp_getCurrentNetwork</a></span>()
network_info[,<span class="kw">c</span>(<span class="st">'id'</span>, <span class="st">'networkCode'</span>)]
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;        id networkCode</span>
<span class="co">#&gt;     &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1 109096.    1019096.</span></code></pre></div>
<div id="pull-a-lineitem" class="section level4">
<h4 class="hasAnchor">
<a href="#pull-a-lineitem" class="anchor"></a>Pull a LineItem</h4>
<p>The function <code><a href="reference/dfp_getLineItemsByStatement.html">dfp_getLineItemsByStatement()</a></code> function from the <a href="https://developers.google.com/doubleclick-publishers/docs/reference/v201802/LineItemService">LineItemService</a> allows you to retrieve Line Items by Publishers Query Language (PQL) statement. The statement is constructed as a list of lists that are nested to emulate the hierarchy of the XML that needs to be created in the request.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Retrieve up to 3 Line Items that have a status of "DELIVERING"</span>
request_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">'filterStatement'</span>=<span class="kw">list</span>(<span class="st">'query'</span>=<span class="st">"WHERE status='DELIVERING' LIMIT 3"</span>))
resultset &lt;-<span class="st"> </span><span class="kw"><a href="reference/dfp_getLineItemsByStatement.html">dfp_getLineItemsByStatement</a></span>(request_data, <span class="dt">as_df=</span><span class="ot">TRUE</span>) 
resultset[,<span class="kw">c</span>(<span class="st">'orderId'</span>, <span class="st">'id'</span>, <span class="st">'priority'</span>, <span class="st">'deliveryRateType'</span>)]
<span class="co">#&gt; # A tibble: 3 x 4</span>
<span class="co">#&gt;       orderId          id priority deliveryRateType</span>
<span class="co">#&gt;         &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;           </span>
<span class="co">#&gt; 1 1254227776. 1928427256.      12. EVENLY          </span>
<span class="co">#&gt; 2 1393728736. 2038280896.      12. EVENLY          </span>
<span class="co">#&gt; 3 1265251936. 2060032216.      16. EVENLY</span></code></pre></div>
</div>
</div>
<div id="run-a-report" class="section level3">
<h3 class="hasAnchor">
<a href="#run-a-report" class="anchor"></a>Run a Report</h3>
<p>Below is an example of how to make a simple report request.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># In order to run a report you must specify how the report should be structured </span>
<span class="co"># by specifying a reportQuery inside a reportJob. All of the dimensions, columns, </span>
<span class="co"># date range options, etc. are documented at:</span>
<span class="co"># https://developers.google.com/doubleclick-publishers/docs/reference/v201802/ReportService.ReportQuery</span>
request_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">reportJob=</span><span class="kw">list</span>(<span class="dt">reportQuery=</span><span class="kw">list</span>(<span class="dt">dimensions=</span><span class="st">'MONTH_AND_YEAR'</span>, 
                                                     <span class="dt">dimensions=</span><span class="st">'AD_UNIT_ID'</span>,
                                                     <span class="dt">adUnitView=</span><span class="st">'FLAT'</span>,
                                                     <span class="dt">columns =</span> <span class="st">'AD_SERVER_IMPRESSIONS'</span>, 
                                                     <span class="dt">columns =</span> <span class="st">'AD_SERVER_CLICKS'</span>,
                                                     <span class="dt">dateRangeType=</span><span class="st">'LAST_WEEK'</span>
                                                     )))

<span class="co"># a convenience function has been provided to you to manage the report process workflow</span>
<span class="co"># if you would like more control, see the example below which moves through each step in the process</span>
report_data &lt;-<span class="st"> </span><span class="kw"><a href="reference/dfp_full_report_wrapper.html">dfp_full_report_wrapper</a></span>(request_data)
report_data[,<span class="kw">c</span>(<span class="st">'Dimension.MONTH_AND_YEAR'</span>, <span class="st">'Dimension.AD_UNIT_ID'</span>, <span class="st">'Column.AD_SERVER_CLICKS'</span>)]
<span class="co">#&gt; # A tibble: 25 x 3</span>
<span class="co">#&gt;    Dimension.MONTH_AND_YEAR Dimension.AD_UNIT_ID Column.AD_SERVER_CLICKS</span>
<span class="co">#&gt;    &lt;chr&gt;                                   &lt;dbl&gt;                   &lt;dbl&gt;</span>
<span class="co">#&gt;  1 2018-03                            133765096.                   1778.</span>
<span class="co">#&gt;  2 2018-03                            133765216.                    422.</span>
<span class="co">#&gt;  3 2018-03                            133765336.                    642.</span>
<span class="co">#&gt;  4 2018-03                            133765456.                   2176.</span>
<span class="co">#&gt;  5 2018-03                            142461136.                     91.</span>
<span class="co">#&gt;  6 2018-03                            133765576.                  17581.</span>
<span class="co">#&gt;  7 2018-03                            133765696.                    945.</span>
<span class="co">#&gt;  8 2018-03                            133765936.                  18171.</span>
<span class="co">#&gt;  9 2018-03                            142461016.                    312.</span>
<span class="co">#&gt; 10 2018-03                            143543776.                   1496.</span>
<span class="co">#&gt; # ... with 15 more rows</span></code></pre></div>
</div>
</div>
<div id="credits" class="section level2">
<h2 class="hasAnchor">
<a href="#credits" class="anchor"></a>Credits</h2>
<p>This application uses other open source software components. The authentication components are mostly verbatim copies of the routines established in the <strong>googlesheets</strong> package (<a href="https://github.com/jennybc/googlesheets" class="uri">https://github.com/jennybc/googlesheets</a>). We acknowledge and are grateful to these developers for their contributions to open source.</p>
</div>
<div id="more-information" class="section level2">
<h2 class="hasAnchor">
<a href="#more-information" class="anchor"></a>More Information</h2>
<p>Google provides support for client libraries <a href="https://developers.google.com/doubleclick-publishers/docs/clients">here</a>, but unfortunately, R is not a supported language. Google’s client libraries directly reference the production WSDLs to interact with the API, but this package makes SOAP requests best formatted to match the WSDL standards. This articulation is not perfect and continued progress will be made to bring functionality up to par with the client libraries.</p>
<p>Most all operations supported by the DFP API are available via this package. It is strongly recommended that you use the <a href="https://developers.google.com/doubleclick-publishers/docs/rel_notes">DFP API Reference</a> when using this package. Details on formatting, attributes, and methods are all better explained by Google’s documentation.</p>
<p>More information is also available on the <code>pkgdown</code> site at <a href="https://StevenMMortimer.github.io/rdfp/" class="uri">https://StevenMMortimer.github.io/rdfp/</a>.</p>
<p><a href="#rdfp-">Top</a></p>
<hr>
<p>Please note that this project is released with a <a href="CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>

  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

